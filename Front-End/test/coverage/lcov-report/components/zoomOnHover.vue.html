<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for components/zoomOnHover.vue</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\prettify.css" />
    <link rel="stylesheet" href="..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\index.html">All files</a> / <a href="index.html">components</a> zoomOnHover.vue
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/44</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/14</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/44</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">&lt;template&gt;
	&lt;div class="zoom-on-hover" @mousemove="move" @mouseenter="zoom" @mouseleave="unzoom"&gt;
		&lt;img class="normal" ref="normal" :src="imgNormal"/&gt;
		&lt;img class="zoom" ref="zoom" :src="imgZoom || imgNormal"/&gt; 
		
		&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
&nbsp;
export default {
	props: ["imgNormal", "imgZoom", "scale", "disabled"],
&nbsp;
<span class="fstat-no" title="function not covered" >	data: function () {</span>
<span class="cstat-no" title="statement not covered" >		return {</span>
			scaleFactor: 1,
			resizeCheckInterval: null
		}
	},
	methods: {
<span class="fstat-no" title="function not covered" >		 pageOffset:function(el) {</span>
			// -&gt; {x: number, y: number}
			// get the left and top offset of a dom block element
<span class="cstat-no" title="statement not covered" >			let rect = el.getBoundingClientRect(),</span>
				scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
				scrollTop = window.pageYOffset || document.documentElement.scrollTop;
<span class="cstat-no" title="statement not covered" >			return {</span>
				y: rect.top + scrollTop,
				x: rect.left + scrollLeft
			}
		},
<span class="fstat-no" title="function not covered" >		zoom: function () {</span>
<span class="cstat-no" title="statement not covered" >			if (this.disabled) return</span>
<span class="cstat-no" title="statement not covered" >			this.$refs.zoom.style.opacity = 1</span>
<span class="cstat-no" title="statement not covered" >			this.$refs.normal.style.opacity = 0</span>
		},
<span class="fstat-no" title="function not covered" >		unzoom: function () {</span>
<span class="cstat-no" title="statement not covered" >			if (this.disabled) return</span>
<span class="cstat-no" title="statement not covered" >			this.$refs.zoom.style.opacity = 0</span>
<span class="cstat-no" title="statement not covered" >			this.$refs.normal.style.opacity = 1</span>
		},
<span class="fstat-no" title="function not covered" >		move: function (event) {</span>
<span class="cstat-no" title="statement not covered" >			if (this.disabled) return</span>
<span class="cstat-no" title="statement not covered" >			let offset = this.pageOffset(this.$el)</span>
<span class="cstat-no" title="statement not covered" >			let zoom = this.$refs.zoom</span>
<span class="cstat-no" title="statement not covered" >			let normal = this.$refs.normal</span>
<span class="cstat-no" title="statement not covered" >			let relativeX = event.clientX - offset.x + window.pageXOffset</span>
<span class="cstat-no" title="statement not covered" >			let relativeY = event.clientY - offset.y + window.pageYOffset</span>
<span class="cstat-no" title="statement not covered" >			let normalFactorX = relativeX / normal.offsetWidth</span>
<span class="cstat-no" title="statement not covered" >			let normalFactorY = relativeY / normal.offsetHeight</span>
<span class="cstat-no" title="statement not covered" >			let x = normalFactorX * (zoom.offsetWidth * this.scaleFactor - normal.offsetWidth)</span>
<span class="cstat-no" title="statement not covered" >			let y = normalFactorY * (zoom.offsetHeight * this.scaleFactor - normal.offsetHeight)</span>
<span class="cstat-no" title="statement not covered" >			zoom.style.left = -x + "px"</span>
<span class="cstat-no" title="statement not covered" >			zoom.style.top = -y + "px"</span>
		},
<span class="fstat-no" title="function not covered" >		initEventLoaded: function () {</span>
			// emit the "loaded" event if all images have been loaded
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >			let promises = [this.$refs.zoom, this.$refs.normal].map(function (image) {</span></span>
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >				return new Promise(function (resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >					image.addEventListener("load", resolve)</span>
<span class="cstat-no" title="statement not covered" >					image.addEventListener("error", reject)</span>
				})
			})
<span class="cstat-no" title="statement not covered" >			let component = this</span>
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >			Promise.all(promises).then(function () {</span></span>
<span class="cstat-no" title="statement not covered" >				component.$emit("loaded")</span>
			})
		},
<span class="fstat-no" title="function not covered" >		initEventResized: function () {</span>
<span class="cstat-no" title="statement not covered" >			let normal = this.$refs.normal</span>
<span class="cstat-no" title="statement not covered" >			let previousWidth = normal.offsetWidth</span>
<span class="cstat-no" title="statement not covered" >			let previousHeight = normal.offsetHeight</span>
<span class="cstat-no" title="statement not covered" >			let component = this</span>
<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >			this.resizeCheckInterval = setInterval(function () {</span></span>
<span class="cstat-no" title="statement not covered" >				if ((previousWidth != normal.offsetWidth) || (previousHeight != normal.offsetHeight)) {</span>
<span class="cstat-no" title="statement not covered" >					previousWidth = normal.offsetWidth</span>
<span class="cstat-no" title="statement not covered" >					previousHeight = normal.offsetHeight</span>
<span class="cstat-no" title="statement not covered" >					component.$emit("resized", {</span>
						width: normal.width,
						height: normal.height,
						fullWidth: normal.naturalWidth,
						fullHeight: normal.naturalHeight
					})
				}
			}, 1000)
		}
	},
<span class="fstat-no" title="function not covered" >	mounted: function () {</span>
<span class="cstat-no" title="statement not covered" >		if (this.$props.scale) {</span>
<span class="cstat-no" title="statement not covered" >			this.scaleFactor = parseInt(this.$props.scale)</span>
<span class="cstat-no" title="statement not covered" >			this.$refs.zoom.style.transform = "scale(" + this.scaleFactor + ")"</span>
		}
<span class="cstat-no" title="statement not covered" >		this.initEventLoaded()</span>
<span class="cstat-no" title="statement not covered" >		this.initEventResized()</span>
	},
<span class="fstat-no" title="function not covered" >	updated: function () {</span>
<span class="cstat-no" title="statement not covered" >		this.initEventLoaded()</span>
	},
<span class="fstat-no" title="function not covered" >	beforeDestroy: function () {</span>
<span class="cstat-no" title="statement not covered" >		this.resizeCheckInterval &amp;&amp; clearInterval(this.resizeCheckInterval)</span>
	}
}
&lt;/script&gt;
	&lt;style&gt;
	.zoom-on-hover {
	position: relative;
	overflow: hidden;
	}
	.zoom-on-hover .normal {
	width: 100%;
	}
	.zoom-on-hover .zoom {
	position: absolute;
	opacity: 0;
	transform-origin: top left;
	}
&nbsp;
&lt;/style&gt;
&nbsp;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Mon Aug 19 2019 01:43:26 GMT+0700 (SE Asia Standard Time)
</div>
</div>
<script src="..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\sorter.js"></script>
</body>
</html>
